(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{446:function(e,n,t){"use strict";t.r(n);var a=t(46),s=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"installing-mediawiki-on-reaper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-mediawiki-on-reaper"}},[e._v("#")]),e._v(" Installing MediaWiki on Reaper")]),e._v(" "),t("p",[e._v("A short story, as written by seth.")]),e._v(" "),t("p",[e._v("Mostly in note form so I can work out what I've done at a later date.")]),e._v(" "),t("h2",{attrs:{id:"zone-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zone-installation"}},[e._v("#")]),e._v(" Zone Installation")]),e._v(" "),t("p",[e._v("create the db zone")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("reaper:~# zonecfg -z db\ndb: No such zone configured\nUse 'create' to begin configuring a new zone.\nzonecfg:db> create\nzonecfg:db> set zonepath=/zones/zone_roots/db\nzonecfg:db> add net\nzonecfg:db:net> set address=193.62.81.38\nzonecfg:db:net>\nzonecfg:db:net> set physical=hme0\nzonecfg:db:net> end\nzonecfg:db> commit\nzonecfg:db> exit\n\n\nreaper:~# zoneadm -z db install\nPreparing to install zone <db>.\nCreating list of files to copy from the global zone.\nCopying <25506> files to the zone.\n")])])]),t("p",[e._v("... make a nice cup of tea (this will take a few minutes (15-20))...")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Initializing zone product registry.\nDetermining zone package initialization order.\nPreparing to initialize <1057> packages on the zone.\nInitialized <1057> packages on zone.                                 [[A^[[A\nZone <db> is initialized.\nInstallation of <1> packages was skipped.\nInstallation of these packages generated warnings: <SUNWglrt>\nThe file </zones/zone_roots/db/root/var/sadm/system/logs/install_log> contains\na log of the zone installation.\n\nreaper:~# zoneadm -z db boot\nreaper:~# zlogin -e] -C db\n")])])]),t("p",[e._v("(tra la la)")]),e._v(" "),t("p",[e._v("accept the obvious settings")]),e._v(" "),t("ul",[t("li",[e._v("term is xterms")]),e._v(" "),t("li",[e._v("domain reaper.tardis.ed.ac.uk")]),e._v(" "),t("li",[e._v("naming service is dns\n"),t("ul",[t("li",[e._v("nameserver1 193.62.81.14")]),e._v(" "),t("li",[e._v("nameserver2 129.215.200.7")]),e._v(" "),t("li",[e._v("search reaper.tardis.ed.ac.uk")]),e._v(" "),t("li",[e._v("search tardis.ed.ac.uk")])])])]),e._v(" "),t("p",[t("em",[e._v("FIXME: set zone to autoboot")])]),e._v(" "),t("h2",{attrs:{id:"set-up-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-up-mysql"}},[e._v("#")]),e._v(" Set up MySQL")]),e._v(" "),t("p",[e._v("(from\n"),t("a",{attrs:{href:"http://meta.wikimedia.org/wiki/Help:Running_MediaWiki_on_Solaris_10",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://meta.wikimedia.org/wiki/Help:Running_MediaWiki_on_Solaris_10"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("# /usr/sfw/bin/mysql_install_db\n# groupadd mysql\n\n# useradd -g mysql -d /var/mysql mysql\n# chgrp -R mysql /var/mysql\n# chmod -R 770 /var/mysql\n\n# /usr/sfw/sbin/mysqld_safe --user=mysql &\n\n# /usr/sfw/bin/mysqladmin -u root password <password>\n\n# ln /etc/sfw/mysql/mysql.server /etc/rc3.d/S99mysql\n# ln /etc/sfw/mysql/mysql.server /etc/rc1.d/K00mysql\n# ln /etc/sfw/mysql/mysql.server /etc/rc0.d/K00mysql\n# ln /etc/sfw/mysql/mysql.server /etc/rc2.d/K00mysql\n# ln /etc/sfw/mysql/mysql.server /etc/rcS.d/K00mysql\n")])])]),t("p",[e._v("FIXME - fix security settings")]),e._v(" "),t("h2",{attrs:{id:"webserver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webserver"}},[e._v("#")]),e._v(" WEBSERVER")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("reaper:~# zonecfg -z www\nwww: No such zone configured\nUse 'create' to begin configuring a new zone.\nzonecfg:www> create\nzonecfg:www> set zonepath=/zones/zone_roots/www\nzonecfg:www> add net\nzonecfg:www:net> set address=193.62.81.36\nzonecfg:www:net> set physical=hme0\nzonecfg:www:net> end\nzonecfg:www> commit\nzonecfg:www> exit\n")])])]),t("p",[e._v("add /usr/apache as a lofs thingy "),t("em",[e._v("FIXME - DOCUMENT THIS")]),e._v(" cp reapers\nversion into shared dir")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("reaper:~# zoneadm -z www install\nPreparing to install zone <www>.\nCreating list of files to copy from the global zone.\nCopying <25506> files to the zone.\nInitializing zone product registry.\nDetermining zone package initialization order.\nPreparing to initialize <1057> packages on the zone.\nInitialized <1057> packages on zone.\nZone <www> is initialized.\nInstallation of <1> packages was skipped.\nInstallation of these packages generated warnings: <SUNWglrt>\nThe file </zones/zone_roots/www/root/var/sadm/system/logs/install_log>\ncontains a log of the zone installation.\nreaper:~# zoneadm -z www boot && zlogin -e] -C www\n[Connected to zone 'www' console]\nHostname: www\n")])])]),t("p",[e._v("then installation begins:")]),e._v(" "),t("p",[e._v("Answers to questions pretty much the same as the previous zone.")]),e._v(" "),t("p",[e._v("and then off we go!")]),e._v(" "),t("p",[e._v("create a user account:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("# svcadm disable svc:/system/filesystem/autofs:default\n# chmod 755 /home\n# useradd -m -d /home/username -s /bin/bash/ username\n# passwd seth\n")])])]),t("p",[e._v("scp config files from reaper (saves time)\n"),t("code",[e._v("reaper# scp /etc/profile /etc/default/login /etc/default/su user@newhost")])]),e._v(" "),t("p",[e._v("drop them into place on the new system (ssh in with user account, then\nsu to root)")]),e._v(" "),t("p",[e._v("you may also wish to change root's shell and homedir (in /etc/passwd)")]),e._v(" "),t("p",[e._v("logout, log back in.... voila!")]),e._v(" "),t("p",[e._v("install the php package (sun url)")]),e._v(" "),t("p",[e._v("PATCH LIKE A MOTHERFUCKER")]),e._v(" "),t("p",[e._v("run x_postinstall")]),e._v(" "),t("p",[e._v("edit the apache config file:")]),e._v(" "),t("ul",[t("li",[e._v("use vhosts")]),e._v(" "),t("li",[e._v("serve index.php as an index")]),e._v(" "),t("li",[e._v("set hostname, email etc")])]),e._v(" "),t("p",[t("em",[e._v("there are links to this stuff on the web, google for SAMP stack, etc")]),e._v(" "),t("em",[e._v("FIXME: refind those links")])]),e._v(" "),t("h2",{attrs:{id:"wiki"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wiki"}},[e._v("#")]),e._v(" WIKI")]),e._v(" "),t("h3",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),t("p",[e._v("Get tarball, dump into vhost directory.")]),e._v(" "),t("h3",{attrs:{id:"db-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#db-installation"}},[e._v("#")]),e._v(" DB Installation")]),e._v(" "),t("p",[e._v("MYSQL: > CREATE DATABASE dbname; > GRANT ALL PRIVILEGES ON vworks.*\nTO newuser@192.168.0.2 IDENTIFIED BY 'newpassword';")]),e._v(" "),t("h3",{attrs:{id:"configuring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuring"}},[e._v("#")]),e._v(" Configuring")]),e._v(" "),t("p",[e._v("Access "),t("a",{attrs:{href:"http://wiki/wiki/config/index.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://wiki/wiki/config/index.php"),t("OutboundLink")],1),e._v(" or whatever, RTFM. Copy\nsettings file as described in Fine Manual, nuke config dir")]),e._v(" "),t("p",[e._v("Edit localsettings.php Change the whitelist settings as\n"),t("a",{attrs:{href:"http://meta.wikimedia.org/wiki/Preventing_Access",target:"_blank",rel:"noopener noreferrer"}},[e._v("documented"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[t("a",{attrs:{href:"Category:OutOfDate",title:"wikilink"}},[e._v("Category:OutOfDate")])])])}),[],!1,null,null,null);n.default=s.exports}}]);