(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{512:function(e,t,i){"use strict";i.r(t);var a=i(46),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("p",[e._v("Tempus is the KVM template name for CentOS 6.5 on the Proxmox cluster.\nIt was created from a bare Minimal install from CentOS 6.5 netinstall,\nwith common packages (e.g. vim) added for convenience.")]),e._v(" "),i("h2",{attrs:{id:"added-packages"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#added-packages"}},[e._v("#")]),e._v(" Added packages")]),e._v(" "),i("ul",[i("li",[e._v("vim")]),e._v(" "),i("li",[e._v("htop")]),e._v(" "),i("li",[e._v("epel-release")]),e._v(" "),i("li",[e._v("screen")]),e._v(" "),i("li",[e._v("wget")]),e._v(" "),i("li",[e._v("bind-utils (dig and friends)")])]),e._v(" "),i("h2",{attrs:{id:"cloning"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#cloning"}},[e._v("#")]),e._v(" Cloning")]),e._v(" "),i("p",[e._v("Right click VM 102 (tempus.tardis.ed.ac.uk) under gallifrey and select\nClone. Use the following settings:")]),e._v(" "),i("ul",[i("li",[e._v("Target node: Gallifrey (you can migrate it after cloning)")]),e._v(" "),i("li",[e._v("Mode: Full Clone (linked ties it to the template!)")]),e._v(" "),i("li",[e._v("Target Storage: local")]),e._v(" "),i("li",[e._v("Format: QEMU image format (qcow2)")])]),e._v(" "),i("h2",{attrs:{id:"post-clone"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#post-clone"}},[e._v("#")]),e._v(" Post-Clone")]),e._v(" "),i("p",[e._v("After cloning the VM, the VM itself needs some changes:")]),e._v(" "),i("ul",[i("li",[e._v("Add a Bridged VirtIO Network Device in Hardware (no VLAN, no\nFirewall)")]),e._v(" "),i("li",[e._v("Adjust memory capacity as needed")]),e._v(" "),i("li",[e._v("Expand (not reduce) disk space as needed. Reconfiguring LVM is left\nas an exercise for the reader.")])]),e._v(" "),i("p",[e._v("The VM network needs to be reconfigured (its default is DHCP, with\nadapter as a NAT to the VM host):")]),e._v(" "),i("ul",[i("li",[e._v("Set static IP")]),e._v(" "),i("li",[e._v("Change hostname from tempus.tardis.ed.ac.uk to the correct one.")])]),e._v(" "),i("p",[e._v("Both of these steps should be done by running system-config-network,\nwhich is a TUI for configuring interfaces "),i("strong",[e._v("and")]),e._v(" DNS settings. To add\nthe network device:")]),e._v(" "),i("ul",[i("li",[e._v('In Device configuration, select "'),i("New",{attrs:{Device:""}},[e._v('"')])],1),e._v(" "),i("li",[e._v("Ethernet")]),e._v(" "),i("li",[e._v("Name can be anything")]),e._v(" "),i("li",[e._v("Device: eth1")]),e._v(" "),i("li",[e._v("Static IP: The machine IP address")]),e._v(" "),i("li",[e._v("Netmask: 255.255.255.192")]),e._v(" "),i("li",[e._v("Primary gateway IP: 193.62.81.1")]),e._v(" "),i("li",[e._v("Primary DNS Server: 193.62.81.14")]),e._v(" "),i("li",[e._v("Secondary DNS Server: 8.8.8.8 (just in case Leela is down)")])]),e._v(" "),i("p",[e._v("Then to load the interface on boot:")]),e._v(" "),i("ul",[i("li",[e._v("Open /etc/sysconfig/network-scripts/ifcfg-NAME (where NAME is the\nname set earlier)")]),e._v(" "),i("li",[e._v("Change ONBOOT=no to ONBOOT=yes")]),e._v(" "),i("li",[e._v("Save.")])]),e._v(" "),i("p",[e._v("The needed settings under DNS Configuration are here:")]),e._v(" "),i("ul",[i("li",[e._v("Hostname: Set to machine name with .tardis.ed.ac.uk postfix.")]),e._v(" "),i("li",[e._v("Primary DNS: 193.62.81.14")]),e._v(" "),i("li",[e._v("Secondary DNS: 8.8.8.8")]),e._v(" "),i("li",[e._v("Tertiary DNS: 8.8.4.4")]),e._v(" "),i("li",[e._v("Search Domain: tardis.ed.ac.uk")])]),e._v(" "),i("p",[e._v("The rest of the VM should(tm) be fully functional out of the box,\nincluding root SSH.")]),e._v(" "),i("p",[i("a",{attrs:{href:"category:infrastructure",title:"wikilink"}},[e._v("category:infrastructure")])]),e._v(" "),i("p",[i("a",{attrs:{href:"Category:Admin_Documents",title:"wikilink"}},[e._v("Category:Admin_Documents")])])])}),[],!1,null,null,null);t.default=n.exports}}]);