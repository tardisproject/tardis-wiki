(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{456:function(e,t,n){"use strict";n.r(t);var s=n(46),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v(".")]),e._v(" "),n("p",[e._v("This page is more commentary on what we're doing, and some history (from\nthe point of view of 2017).")]),e._v(" "),n("h1",{attrs:{id:"resources"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[e._v("#")]),e._v(" Resources")]),e._v(" "),n("p",[e._v("We have a /24 of public IP space - 193.62.81.0/24.")]),e._v(" "),n("p",[e._v("The current whois record shows the following data:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("% This is the RIPE Database query service.\n% The objects are in RPSL format.\n%\n% The RIPE Database is subject to Terms and Conditions.\n% See http://www.ripe.net/db/support/db-terms-conditions.pdf\n\n% Note: this output has been filtered.\n%       To receive output for a database update, use the \"-B\" flag.\n\n% Information related to '193.62.81.0 - 193.62.81.255'\n\n% Abuse contact for '193.62.81.0 - 193.62.81.255' is 'irt@csirt.ja.net'\n\ninetnum:        193.62.81.0 - 193.62.81.255\nnetname:        UNI-EDINBURGH\ndescr:          University of Edinburgh\ndescr:          The Tardis Project, Edinburgh, UK\ndescr:          University of Edinburgh\ncountry:        GB\nadmin-c:        WRT2-RIPE\nadmin-c:        CC1722-RIPE\ntech-c:         CC1722-RIPE\ntech-c:         WRT2-RIPE\nstatus:         ASSIGNED PA\nmnt-by:         JANET-HOSTMASTER\ncreated:        2001-10-24T08:13:18Z\nlast-modified:  2017-10-25T14:51:18Z\nsource:         RIPE # Filtered\n\nperson:         Chris Cooke\naddress:        Department of Computer Science\naddress:        University of Edinburgh\naddress:        Edinburgh EH9 3JZ\naddress:        United Kingdom\nphone:          +44 31 650 5203\nfax-no:         +44 31 667 7209\nnic-hdl:        CC1722-RIPE\ncreated:        1970-01-01T00:00:00Z\nlast-modified:  2016-04-05T14:13:11Z\nmnt-by:         RIPE-NCC-LOCKED-MNT\nsource:         RIPE # Filtered\n\nperson:         W R Taylor\naddress:        Edinburgh Parallel Computing Centre\naddress:        University of Edinburgh\naddress:        Edinburgh EH9 3JZ\naddress:        United Kingdom\nphone:          +44 31 650 5027\nfax-no:         +44 31 650 6555\nnic-hdl:        WRT2-RIPE\ncreated:        1970-01-01T00:00:00Z\nlast-modified:  2016-04-05T14:13:11Z\nmnt-by:         RIPE-NCC-LOCKED-MNT\nsource:         RIPE # Filtered\n\n% This query was served by the RIPE Database Query Service version 1.90 (ANGUS)\n")])])]),n("p",[n("code",[e._v("admin-c")]),e._v(" and "),n("code",[e._v("tech-c")]),e._v(" should be kept up to date regularly. We need to\nclarify who these should be - whether they can be an organisation (ie\nTardis gets its own org in the RIPE DB), or if it should be someone from\nthe School of Informatics.")]),e._v(" "),n("h1",{attrs:{id:"subnetting-vlans"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subnetting-vlans"}},[e._v("#")]),e._v(" Subnetting & VLANs")]),e._v(" "),n("p",[e._v("Subnetting is done based on logical grouping. Each subnet occupies one\nVLAN. The canonical source of information for what is current in this\nspace is "),n("a",{attrs:{href:"https://netbox.tardis.ed.ac.uk/ipam/prefixes/",target:"_blank",rel:"noopener noreferrer"}},[e._v("the prefixes page on\nnetbox"),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("p",[e._v("The splitting of these is mostly to make firewall zoning much easier -\nPFSense operates on what interface it receives traffic on.")]),e._v(" "),n("p",[e._v("As such, Tardis services occupy the main VLAN and public subnet.")]),e._v(" "),n("p",[e._v("If a VLAN is internally addressable, tbrb's practice is to give it\n10.X.0.0/N, where X is the VLAN ID, and N is a reasonable subnet size\nfor what it is - usually with the router being on 10.X.0.1. This gives\nmore flexibility in subnet size than 10.0.X.0, as the biggest subnet you\ncould do there is a /24.")]),e._v(" "),n("h3",{attrs:{id:"colo-services"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#colo-services"}},[e._v("#")]),e._v(" Colo services")]),e._v(" "),n("p",[e._v("Colo in this case is defined as Tardis providing VMs or server space to\nother "),n("strong",[e._v("groups")]),e._v(". This is only granted at the discretion of the admins.\nThese machines generally would be able to be publicly reachable, but any\nSSH connections to these machines SHOULD GO THROUGH THE TARDIS SHELL\nSERVER (historically the only group exempt from this has been CompSoc,\nwho have been allowed to operate their own shell server, generally to\nthe same degree of security as Tardis' own shell servers. CompSoc also\nare allocated their own /28 within our /24).")]),e._v(" "),n("p",[e._v("Any colo services do not need access to things behind the Tardis\nfirewall, and as they are not administered by Tardis, traffic should\nhave to pass through the firewall to reach Tardis systems. This has not\nalways been the case, but is good practice to move forward into.")]),e._v(" "),n("h3",{attrs:{id:"project-boxes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#project-boxes"}},[e._v("#")]),e._v(" Project Boxes")]),e._v(" "),n("p",[e._v("Project boxes are more given out to people who need space to run their\nown projects, typically honours stuff however it is not limited to that.\nThese are generally treated the same as colo machines, except the\nprojects vlan is privately addressed. This is mostly because they don't\ngenerally need anything publicly exposed.")]),e._v(" "),n("p",[e._v("As ever, project boxes should NOT have SSH enabled externally - they\nshould go via the shell servers.")]),e._v(" "),n("p",[e._v("If they need anything publicly exposed, Tardis should set up a server on\na public subnet (could be main Tardis subnet, could be one of the spare\nones) to act as a reverse proxy. This machine does not need interfaces\non both networks, it has L3 reachability - traffic can go from the\nreverse proxy to it's default gateway (the router) and then can reach\nthe private IPs.")]),e._v(" "),n("h1",{attrs:{id:"_2017-moving-to-a-25"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2017-moving-to-a-25"}},[e._v("#")]),e._v(" 2017: Moving to a /25")]),e._v(" "),n("p",[e._v("Tardis, for historical reasons, occupies the first /26 of the network\nblock. In the past the two /28s immediately after that /26 were\nallocated, however these have been freed up and nothing allocated until\nthe second /25 of our /24. This is with the plan to migrate the main\nTardis LAN from a /26 to a /25. (If we've not yet done this, see "),n("a",{attrs:{href:"https://netbox.tardis.ed.ac.uk/ipam/aggregates/5/",target:"_blank",rel:"noopener noreferrer"}},[e._v("this\npage on netbox"),n("OutboundLink")],1),e._v(" for\nsomething which may help -\n"),n("code",[e._v("(.64/28 + .80/28) + .96/27 = .64/27 + .96/27 = .64/26")]),e._v(").")]),e._v(" "),n("p",[e._v("To do this move, all we need to do is go and edit the subnet mask &\nbroadcast address on all relevant machines in the current /26.")]),e._v(" "),n("p",[e._v("The downside to this is Proxmox prompts for a reboot when you change the\nsubnet mask. Yes, seriously. Don't ask me why, I don't know, but it\ndoes. In theory it can be worked around but I (tbrb) have concerns how\nstable that may be.")]),e._v(" "),n("p",[e._v("As this needs considerable downtime, it was going to be left until the\nmove to AT (from the Forum).")]),e._v(" "),n("p",[e._v("Until this point there are a few things we can do:")]),e._v(" "),n("ul",[n("li",[e._v("Clear out old project boxes in the main Tardis subnet which are now\nunused.")]),e._v(" "),n("li",[e._v("Ask people who are colo'd in the main Tardis subnet to migrate their\nservices to the colo subnet.")]),e._v(" "),n("li",[e._v("Generally audit what's running and what's noted as allocated but is\nno longer actually running")])])])}),[],!1,null,null,null);t.default=o.exports}}]);