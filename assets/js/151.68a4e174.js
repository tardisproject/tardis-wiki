(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{522:function(e,a,t){"use strict";t.r(a);var n=t(46),s=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"updating-debian-packages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-debian-packages"}},[e._v("#")]),e._v(" Updating Debian packages")]),e._v(" "),t("p",[e._v("A "),t("em",[e._v("quick update")]),e._v(" can be done by")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("apt-get update\napt-get upgrade\n")])])]),t("p",[e._v("For general installation, updates, and so on "),t("code",[e._v("aptitude")]),e._v(" is a good\nchoice.")]),e._v(" "),t("h3",{attrs:{id:"caveats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#caveats"}},[e._v("#")]),e._v(" Caveats")]),e._v(" "),t("p",[e._v("Anything that shouldn't be updated? Like stuff with custom patches? Does\napt have a history of clobbering configs or anything?")]),e._v(" "),t("h2",{attrs:{id:"cron-apt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron-apt"}},[e._v("#")]),e._v(" cron-apt")]),e._v(" "),t("p",[e._v("We run "),t("em",[e._v("cron-apt")]),e._v(" to give us warnings via root's email when packages\nneed to be updated. This should be installed on every box. Here's the\nchange you need to make to the configuration:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('--- /etc/cron-apt/config.orig   2009-02-25 05:41:42.000000000 +0000\n+++ /etc/cron-apt/config        2009-02-25 05:44:11.000000000 +0000\n@@ -94,7 +94,7 @@\n #       output  (send mail when output is generated)\n #        always  (always send mail)\n #                (else never send mail)\n-# MAILON="error"\n+MAILON="changes"\n\n # Value: error   (syslog on error runs)\n #       upgrade (when packages is upgraded)\n')])])]),t("h2",{attrs:{id:"updating-kernels"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-kernels"}},[e._v("#")]),e._v(" Updating kernels")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("apt-get update\nuname -a                                                                # Figure out which kernel series this machine needs\napt-cache search kernel-image | grep somethingwhichidentifiestheseries  # Find the latest kernel in the series\napt-get install kernel-image-latestversion-series\nshutdown -r N\n")])])]),t("p",[e._v("so for example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("uberjoe@davros:~$ uname -a\nLinux davros 2.6.8-2-sparc64 #1 Fri Jun 10 00:38:40 UTC 2005 sparc64 GNU/Linux\nuberjoe@davros:~$ apt-cache search kernel-image | grep sparc64\nkernel-image-2.6.8-2-sparc64 - Linux kernel binary image for UltraSPARC (sparc64) systems\nkernel-image-2.6.8-3-sparc64 - Linux kernel binary image for UltraSPARC (sparc64) systems\nuberjoe@davros:~$ sudo apt-get install kernel-image-2.6.8-3-sparc64\nboring debian package installation stuff\nuberjoe@davros:~$ sudo vim /etc/silo.conf\nuberjoe@davros:~$ sudo shutdown -r now\n")])])]),t("p",[e._v("Silo should be set up to load the new kernel magically. If not, some\nhaxing may be required to get the new kernel to work. It's probably best\nto try and set it up like so:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('root=/dev/hda2\npartition=1\ndefault=debian\nread-only\ntimeout=100\n\nimage=/boot/vmlinuz\n        label=debian\n        append="UDEV_DISABLED=yes"\n        initrd=/boot/initrd.img\n\nimage=/boot/vmlinuz\n        label=Linux\n        append="UDEV_DISABLED=yes"\n        initrd=/boot/initrd.img\n\nimage=/boot/vmlinuz.old\n        label=LinuxOLD\n        append="UDEV_DISABLED=yes"\n        initrd=/boot/initrd.img.old\n')])])]),t("p",[e._v("This is more or less how debian has it set up by default, but with devfs\nturned off, because we don't need it. You might want to check which\ndrive root is on. Debian should update the symlinks in /boot\nautomagically, and all should be well.")]),e._v(" "),t("h3",{attrs:{id:"caveats-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#caveats-2"}},[e._v("#")]),e._v(" Caveats")]),e._v(" "),t("p",[e._v("Anything tied to specific kernel versions?")]),e._v(" "),t("p",[e._v("The stock Debian stable kernels have a bug in the serial drivers that\nmake the console on Ultra 5s unusable. We previously fixed this with a\nslightly later version of the package (2.6.8-16), but it looks like the\nsecurity update (2.6.8-15sarge1) should have the console fix, along with\na bunch of security fixes. I haven't tested this version yet.")]),e._v(" "),t("p",[t("a",{attrs:{href:"Category:OutOfDate",title:"wikilink"}},[e._v("Category:OutOfDate")]),e._v(" "),t("a",{attrs:{href:"Category:Admin_Documents",title:"wikilink"}},[e._v("Category:Admin\nDocuments")])])])}),[],!1,null,null,null);a.default=s.exports}}]);