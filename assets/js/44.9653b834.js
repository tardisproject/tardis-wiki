(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{417:function(e,t,i){"use strict";i.r(t);var a=i(46),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h2",{attrs:{id:"here-be-dragons"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#here-be-dragons"}},[e._v("#")]),e._v(" Here be dragons")]),e._v(" "),i("p",[e._v("Summary: Don't change the firewall configuation. It's not for changing.")]),e._v(" "),i("p",[e._v("In all seriousness, the firewall is pretty much the only bit of Tardis\nthat absolutely has to be in good working order, for the sake of the\nproject. If you feel the need to make changes, discuss it with everyone,\nespecially the people who understand the ramifications (particularly in\nregards to the relationship the project has with the powers that be (ie,\nInformatics)).")]),e._v(" "),i("p",[e._v("However, if you were (theoretically) going to change it, the\ninstructions would look roughly as follows...")]),e._v(" "),i("h2",{attrs:{id:"changing-the-tardis-firewall"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-tardis-firewall"}},[e._v("#")]),e._v(" Changing the Tardis Firewall")]),e._v(" "),i("p",[e._v("Login to "),i("a",{attrs:{href:"ace",title:"wikilink"}},[e._v("ace")]),e._v(" as root. Using "),i("a",{attrs:{href:"RCS",title:"wikilink"}},[e._v("RCS")]),e._v(",\ncheck-out(lock) the firewall script with:")]),e._v(" "),i("p",[i("code",[e._v("co -l tardis-firewall")])]),e._v(" "),i("p",[e._v("The tardis-firewall script is quite complex so take a good look over it\nfirst, it is fairly well documented. Try to make your edits in an\nappropriate place.")]),e._v(" "),i("p",[e._v("When you're done, you can deploy your changes by running:")]),e._v(" "),i("p",[i("code",[e._v("./tardis-firewall")])]),e._v(" "),i("p",[e._v("A bunch of stuff will scroll past, ending in something similar to:")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[e._v("+ echo 'Setting up fail-safe mechanism.  Use '\\''atrm <job id>'\\'' to stop it.'\nSetting up fail-safe mechanism.  Use 'atrm <job id>' to stop it.\n+ at now + 2 minutes\nwarning: commands will be executed using /bin/sh\njob 321 at 2006-08-20 12:48\nace:~#\n")])])]),i("p",[e._v("Pay close attention to the last two lines! The tardis-firewall script\nhas a failsafe mechanism. You have two minutes to test that your new\nconfiguration is sane. At the very least you should test that:")]),e._v(" "),i("ul",[i("li",[e._v("You can ssh into "),i("a",{attrs:{href:"ace",title:"wikilink"}},[e._v("ace")]),e._v(" from the outside world..")]),e._v(" "),i("li",[e._v("You can ssh into "),i("a",{attrs:{href:"vortis",title:"wikilink"}},[e._v("vortis")]),e._v(" from the outside world.")])]),e._v(" "),i("p",[e._v("If you're satisfied that you haven't broken anything, do:")]),e._v(" "),i("p",[i("code",[e._v("atrm <job given from script (eg 321 from the above example)>")])]),e._v(" "),i("p",[e._v("to disable the failsafe.")]),e._v(" "),i("p",[e._v("If you fail to atrm the job in time, the firewall ruleset will be\nflushed, and routing will be disabled. You will have to log into davison\nexternally, fix the firewall script, and re-run it.")]),e._v(" "),i("p",[e._v("If you're satisfied your edits do what you want, you can commit(unlock)\nthe changes in "),i("a",{attrs:{href:"RCS",title:"wikilink"}},[e._v("RCS")]),e._v(" with")]),e._v(" "),i("p",[i("code",[e._v("ci -u tardis-firewall")])]),e._v(" "),i("h2",{attrs:{id:"ipv6-firewall"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ipv6-firewall"}},[e._v("#")]),e._v(" IPv6 Firewall")]),e._v(" "),i("p",[e._v("Due to the way that 6to4 tunnels work, 6in4 (protocol 41) traffic to\n"),i("a",{attrs:{href:"ace",title:"wikilink"}},[e._v("ace")]),e._v(" must be accepted by the IPv4 firewall for the\n"),i("a",{attrs:{href:"IPv6",title:"wikilink"}},[e._v("IPv6")]),e._v(" tunnel to work correctly.")]),e._v(" "),i("p",[e._v('IPv6 filtering is controlled by the tardis-IPv6firewall script which\nbehaves similar to the the tardis-firewall script. The main difference\nis that there is no "failsafe" since even if you break this script you\nshould still have IPv4 access to the machine. Remember to use\n'),i("a",{attrs:{href:"RCS",title:"wikilink"}},[e._v("RCS")]),e._v(" to check-out/check-in the file!")]),e._v(" "),i("h2",{attrs:{id:"some-history"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#some-history"}},[e._v("#")]),e._v(" Some History")]),e._v(" "),i("p",[e._v("Tardis's firewall is reasonably restrictive on outbound connections.\nSome of the restricted services are as follows:")]),e._v(" "),i("p",[e._v("Outbound ssh access was previously disallowed. This was presumably for\nsecurity reasons, although the original rationale is not exactly known.\nCertainly there was some justification in the arguement that, if you can\nssh to tardis, you can ssh to other hosts directly. This restriction was\nfound to occasionally be irritating, and there were genuine use cases\nfor allowing outbound ssh (svn+ssh being a good example). The current\ntardis admins decided at a meeting to remove the restriction.")]),e._v(" "),i("p",[e._v("All http requests should go via the university's proxy servers. This is\nas much to enforce common sense. It may also have been the case that\npreviously the university had this as an official requirement. At one\npoint of time, the university was being billed separately for\nintercontinental traffic, and made some explicit policies relating to\nhttp cache usage.")]),e._v(" "),i("p",[e._v("IRC access from tardis has been re-enabled after previously being\nforbidden this was on the grounds that informatics currently allow it\nand it was doubted that there will be any problems.")]),e._v(" "),i("h2",{attrs:{id:"notes"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),i("ul",[i("li",[e._v("Be careful!")])]),e._v(" "),i("p",[i("a",{attrs:{href:"Category:OutOfDate",title:"wikilink"}},[e._v("Category:OutOfDate")]),e._v(" "),i("a",{attrs:{href:"Category:Admin_Documents",title:"wikilink"}},[e._v("Category:Admin\nDocuments")]),e._v(" "),i("a",{attrs:{href:"Category:Services",title:"wikilink"}},[e._v("Category:Services")])])])}),[],!1,null,null,null);t.default=s.exports}}]);