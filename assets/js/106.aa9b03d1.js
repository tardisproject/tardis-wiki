(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{477:function(t,e,o){"use strict";o.r(e);var a=o(46),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("p",[t._v("Things which break when tardis restarts....")]),t._v(" "),o("h2",{attrs:{id:"autoboot"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#autoboot"}},[t._v("#")]),t._v(" Autoboot")]),t._v(" "),o("p",[t._v("A bunch of the machines are not set to autoboot. We should fix this, but\nuntil we do, log into davison, and...")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[t._v("telnet spiderport <n>\n")])])]),o("p",[t._v("where N is the last octet of the ip of the machine. Hit enter, and if\nyou get an "),o("code",[t._v("ok")]),t._v(" prompt, type "),o("code",[t._v("boot")]),t._v(" to start the machine up. See the\n"),o("a",{attrs:{href:"spiderport",title:"wikilink"}},[t._v("spiderport")]),t._v(" page for the line configurations.")]),t._v(" "),o("h3",{attrs:{id:"affected-machines"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#affected-machines"}},[t._v("#")]),t._v(" Affected Machines")]),t._v(" "),o("ul",[o("li",[t._v("mccoy (For good reason, best to wait until LDAP and NFS are up\nbefore booting)")]),t._v(" "),o("li",[t._v("peri (For no good reason, it's just DB)")]),t._v(" "),o("li",[t._v("davros (Should wait for LDAP before booting)")]),t._v(" "),o("li",[t._v("reaper (No good reason, other than being a bit broken generally)")]),t._v(" "),o("li",[t._v("Others?")])]),t._v(" "),o("h2",{attrs:{id:"spiderport"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#spiderport"}},[t._v("#")]),t._v(" Spiderport")]),t._v(" "),o("p",[t._v("If the Spiderport powercycles, it will probably send a break to all the\nmachines. Repeat the above procedure for all the machines, except type\n"),o("code",[t._v("go")]),t._v(" instead of boot at the "),o("code",[t._v("ok")]),t._v(" prompt.")]),t._v(" "),o("h3",{attrs:{id:"temporary-fix"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#temporary-fix"}},[t._v("#")]),t._v(" Temporary Fix")]),t._v(" "),o("p",[t._v("If the spiderport sends a break to davison, you'll be locked out and\nunable to fix it. You need crossover a laptop into its network port and\nresume davison:")]),t._v(" "),o("p",[o("code",[t._v("laptop# ifconfig eth0 192.168.1.1 netmask 255.255.255.0")]),t._v(" "),o("code",[t._v("laptop# telnet 192.168.1.3 1")]),t._v(" "),o("code",[t._v("Trying 192.168.1.3...")]),t._v(" "),o("code",[t._v("Connected to 192.168.1.3")]),t._v(" "),o("code",[t._v("Escape character is '^]'.")]),t._v(" "),o("code",[t._v("--- TARDIS SpiderPort ---")])]),t._v(" "),o("p",[t._v("Hit enter to see if you get an "),o("code",[t._v("ok>")]),t._v(" prompt, then type "),o("code",[t._v("go")]),t._v(", and press\nenter a few more times. Should get you back to a login prompt (or not).\n"),o("code",[t._v("<ctrl+]>")]),t._v(" then "),o("code",[t._v("quit")]),t._v(" at the "),o("code",[t._v("telnet>")]),t._v(" prompt will get you out of\ntelnet.")]),t._v(" "),o("h2",{attrs:{id:"nfs-mounts"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#nfs-mounts"}},[t._v("#")]),t._v(" NFS mounts")]),t._v(" "),o("p",[t._v("Wait for everything to come up, and")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[t._v("sudo mount -a\n")])])]),o("p",[t._v("on mccoy and gallifrey.")]),t._v(" "),o("h2",{attrs:{id:"firewall"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#firewall"}},[t._v("#")]),t._v(" Firewall")]),t._v(" "),o("p",[t._v("From a cold boot, the firewall defaults to 'safe' mode, ie it does not\nroute for the rest of tardis. You need to log in from the outside (sshd\non port 2222) and run the firewall script, as follows:")]),t._v(" "),o("p",[t._v("Login to davison (as root), run "),o("code",[t._v("/root/tardis-firewall")]),t._v(". You have 2\nminutes to test that everything is ok, ie, you can login remotely, and\nthen "),o("code",[t._v("atrm")]),o("jobid",[t._v(", as sugggested.")])],1),t._v(" "),o("h3",{attrs:{id:"issues"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#issues"}},[t._v("#")]),t._v(" Issues")]),t._v(" "),o("p",[t._v("If the outside network isn't working on startup, we potentially don't\nadvertise our routes to the rest of the world (eg "),o("code",[t._v("traceroute")]),t._v(" to\n"),o("code",[t._v("router.tardis")]),t._v(" works, but "),o("code",[t._v("davison.tardis")]),t._v(" gets lost somewhere in\nLondon). Restarting davison seems to fix this, but there's probably an\neasier way.")]),t._v(" "),o("h2",{attrs:{id:"time"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#time"}},[t._v("#")]),t._v(" Time")]),t._v(" "),o("p",[t._v("The clock on "),o("a",{attrs:{href:"piper",title:"wikilink"}},[t._v("piper")]),t._v(" drifts quickly when the machine\nis off, and ntpd will refuse to resychronise unless the time is set\nmanually with "),o("code",[t._v("/etc/init.d/ntpdate start")]),t._v(".")]),t._v(" "),o("p",[o("a",{attrs:{href:"Category:OutOfDate",title:"wikilink"}},[t._v("Category:OutOfDate")]),t._v(" "),o("a",{attrs:{href:"Category:Admin_Documents",title:"wikilink"}},[t._v("Category:Admin\nDocuments")])])])}),[],!1,null,null,null);e.default=r.exports}}]);