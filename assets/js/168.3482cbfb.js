(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{539:function(e,s,a){"use strict";a.r(s);var t=a(46),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"ldap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ldap"}},[e._v("#")]),e._v(" LDAP")]),e._v(" "),a("p",[e._v("We currently run OpenLDAP with a few extra schemas:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/files/ldap/amd.schema"}},[a("code",[e._v("amd.schema")])]),e._v(" for automounting user directories")]),e._v(" "),a("li",[a("a",{attrs:{href:"/files/ldap/courier.schema"}},[a("code",[e._v("courier.schema")])]),e._v(" for mailboxes")]),e._v(" "),a("li",[a("a",{attrs:{href:"/files/ldap/pmi.schema"}},[a("code",[e._v("pmi.schema")])]),e._v(" for certificates")]),e._v(" "),a("li",[a("a",{attrs:{href:"/files/ldap/tardis.schema"}},[a("code",[e._v("tardis.schema")])]),e._v(" for some extra attributes")])]),e._v(" "),a("p",[e._v("Users are stored in "),a("code",[e._v("ou=People")]),e._v(", group membership in "),a("code",[e._v("ou=Group")]),e._v(", and drive mounts in "),a("code",[e._v("ou=Maps")])]),e._v(" "),a("h2",{attrs:{id:"example-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-user"}},[e._v("#")]),e._v(" Example user")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# jdoe, People, tardis.ed.ac.uk\ndn: uid=jdoe,ou=People,dc=tardis,dc=ed,dc=ac,dc=uk\nmaildrop: jdoe/\ncn: John Doe\nuid: jdoe\nobjectClass: account\nobjectClass: posixAccount\nobjectClass: top\nobjectClass: CourierMailAccount\nobjectClass: CourierMailAlias\nobjectClass: tardisAccount\nobjectClass: shadowAccount\nloginShell: /bin/bash\nuserPassword: e1NTSEF9REk3MnhNZ2I0QXRmNndQZDhyWjN1Y0hDOVNxYXNmRDYK # jdoe\nuidNumber: 10000\nquota: 10000000S\nsponsors: Jim Doe\ngidNumber: 1005\ngecos: John Doe\nhomeDirectory: /home/jdoe\nmail: jdoe@tardis.ed.ac.uk\nmailbox: jdoe\nexternalEmail: john.doe@acme.inc\nhomePhone: 091231021\nhomePostalAddress: 20 George Square, Edinburgh\n")])])]),a("h2",{attrs:{id:"usertools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usertools"}},[e._v("#")]),e._v(" Usertools")]),e._v(" "),a("p",[e._v("The "),a("a",{attrs:{href:"https://github.com/tardisproject/usertools",target:"_blank",rel:"noopener noreferrer"}},[e._v("TARDIS usertools"),a("OutboundLink")],1),e._v(" are some python scripts we use for common tasks.\nThese are only really for admins, but are documented here anyways")]),e._v(" "),a("h3",{attrs:{id:"tardis-adduser-username"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tardis-adduser-username"}},[e._v("#")]),e._v(" "),a("code",[e._v("tardis adduser <username>")])]),e._v(" "),a("ol",[a("li",[e._v("Creates the user (interactively)")]),e._v(" "),a("li",[e._v("Add a home directory mapping")]),e._v(" "),a("li",[e._v("Email them with their password")])]),e._v(" "),a("h3",{attrs:{id:"tardis-userinfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tardis-userinfo"}},[e._v("#")]),e._v(" "),a("code",[e._v("tardis userinfo")])]),e._v(" "),a("p",[e._v("Gets user information")]),e._v(" "),a("p",[a("code",[e._v("-u")]),e._v(" searches by username.\n"),a("code",[e._v("-r")]),e._v(" by real name ("),a("code",[e._v("cn")]),e._v(" in LDAP).\n"),a("code",[e._v("-i")]),e._v(" by numeric uid.")]),e._v(" "),a("h3",{attrs:{id:"tardis-lastlog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tardis-lastlog"}},[e._v("#")]),e._v(" "),a("code",[e._v("tardis lastlog")])]),e._v(" "),a("p",[e._v("Audits last user logins / password hash types (both by default).")]),e._v(" "),a("p",[e._v("Abandonment shows the year that they last logged in (using "),a("code",[e._v("lastlog")]),e._v(", so should be done on the ssh gateway)")]),e._v(" "),a("p",[e._v("Password shows the hash type (hopefully not plain).")]),e._v(" "),a("h3",{attrs:{id:"tardis-disable-inactive-threshold"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tardis-disable-inactive-threshold"}},[e._v("#")]),e._v(" "),a("code",[e._v("tardis disable-inactive threshold")])]),e._v(" "),a("p",[e._v("Disable users that haven't logged in before or on the threshold year given by moving them to the "),a("code",[e._v("DisabledUsers")]),e._v(" organisational unit.")]),e._v(" "),a("p",[e._v("If "),a("code",[e._v("-n")]),e._v(" is specified, users who have never logged in, or for whom lastlog didn't return a valid result, are also disabled.")]),e._v(" "),a("p",[e._v("Will list accounts to be disabled and prompt for confirmation")])])}),[],!1,null,null,null);s.default=r.exports}}]);